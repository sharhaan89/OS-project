<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C-SCAN DISK SCHEDULING ALGORITHM</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        :root {
            --color-teal: #3AAFA9;
            --color-mint: #B2EBE0;
            --color-cream: #FDFAF6;
            --color-amber: #FF9F1C;
            --color-dark: #2B4141;
            --color-light: #F7F7F7;
            --shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--color-cream);
            color: var(--color-dark);
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
        }

        nav {
            background: linear-gradient(135deg, var(--color-teal), #2E8B99);
            padding: 15px 5%;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 24px;
            font-weight: 700;
            text-decoration: none;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }
        
        .logo:before {
            content: "\f233";
            font-family: "Font Awesome 5 Free";
            margin-right: 10px;
            font-weight: 900;
        }
        
        .logo:hover {
            color: white;
            text-decoration: none;
            transform: scale(1.05);
            transition: var(--transition);
        }

        nav ul {
            list-style: none;
            display: flex;
            margin: 0;
        }

        nav li {
            margin: 0 10px;
        }

        .button {
            background-color: var(--color-teal);
            color: white;
            border: none;
            padding: 10px 18px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            border-radius: 8px;
            transition: var(--transition);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .button:hover {
            background-color: var(--color-amber);
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .button:active {
            transform: translateY(1px);
        }

        .dropdown {
            position: relative;
        }

        .dropdown::after {
            content: '';
            position: absolute;
            height: 13px;
            width: 100%;
            bottom: -10px;
            left: 0;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            min-width: 220px;
            background: white;
            box-shadow: var(--shadow);
            border-radius: 8px;
            z-index: 1000;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s ease, transform 0.3s ease;
            margin-top: 0;
            padding: 5px 0;
            pointer-events: none;
        }

        .dropdown:hover .dropdown-content,
        .dropdown-content:hover {
            display: block;
            opacity: 1;
            transform: translateX(-50%) translateY(5px);
            pointer-events: auto;
        }

        .dropdown-content a {
            color: var(--color-dark);
            padding: 12px 20px;
            text-decoration: none;
            display: block;
            transition: var(--transition);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            font-weight: 500;
        }

        .dropdown-content a:last-child {
            border-bottom: none;
        }

        .dropdown-content a:hover {
            background: var(--color-mint);
            color: var(--color-dark);
            padding-left: 25px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 50px 20px;
        }

        h1 {
            color: var(--color-dark);
            font-size: 2.6rem;
            margin-bottom: 30px;
            font-weight: 700;
            text-align: center;
            position: relative;
            padding-bottom: 15px;
        }

        h1:after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 4px;
            background: linear-gradient(90deg, var(--color-teal), var(--color-mint));
            border-radius: 2px;
        }

        .content {
            display: flex;
            align-items: stretch;
            justify-content: space-between;
            gap: 40px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-top: 40px;
        }

        .text-container {
            flex: 1.5;
            padding: 40px;
            text-align: left;
        }

        p {
            margin-bottom: 20px;
            font-size: 17px;
            line-height: 1.7;
        }

        b {
            color: var(--color-teal);
            font-weight: 600;
        }

        h3 {
            color: var(--color-teal);
            margin-top: 25px;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 1.5rem;
            display: flex;
            align-items: center;
        }

        h3:before {
            content: "";
            display: inline-block;
            width: 15px;
            height: 15px;
            background-color: var(--color-amber);
            margin-right: 12px;
            border-radius: 50%;
        }

        .bullet-points {
            list-style: none;
            padding-left: 15px;
            margin-bottom: 25px;
        }

        .bullet-points li {
            position: relative;
            padding-left: 25px;
            margin-bottom: 12px;
            font-size: 16px;
        }

        .bullet-points li:before {
            content: "\f105";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            position: absolute;
            left: 0;
            color: var(--color-amber);
        }

        .sim-button {
            margin-top: 20px;
            padding: 12px 24px;
            background: linear-gradient(135deg, var(--color-teal), #2E8B99);
            border: none;
            color: white;
            border-radius: 8px;
            font-weight: 500;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            display: inline-flex;
            align-items: center;
        }

        .sim-button:before {
            content: "\f04b";
            font-family: "Font Awesome 5 Free";
            font-weight: 900;
            margin-right: 10px;
        }

        .sim-button:hover {
            background: linear-gradient(135deg, var(--color-amber), #F57C00);
            transform: translateY(-3px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.15);
        }

        .info-card {
            background-color: var(--color-light);
            border-left: 4px solid var(--color-teal);
            padding: 15px;
            margin: 25px 0;
            border-radius: 6px;
        }

        .example-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            border-radius: 8px;
            overflow: hidden;
        }

        .example-table th, .example-table td {
            padding: 12px 15px;
            text-align: center;
            border: 1px solid #ddd;
        }

        .example-table th {
            background-color: var(--color-teal);
            color: white;
            font-weight: 500;
        }

        .example-table tr:nth-child(even) {
            background-color: #f8f8f8;
        }

        .example-table tr:hover {
            background-color: #f1f1f1;
        }

        .simulation-container {
            background: white;
            border-radius: 16px;
            box-shadow: var(--shadow);
            padding: 30px;
            margin-top: 50px;
        }

        .simulation-form {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--color-dark);
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-control:focus {
            border-color: var(--color-teal);
            outline: none;
        }

        .radio-group {
            display: flex;
            gap: 20px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .radio-item input {
            margin-right: 8px;
        }

        .results-container {
            margin-top: 30px;
        }

        .result-card {
            background-color: var(--color-light);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-item {
            text-align: center;
        }

        .result-value {
            font-size: 24px;
            font-weight: 600;
            color: var(--color-teal);
            margin-bottom: 5px;
        }

        .result-label {
            font-size: 14px;
            color: #666;
        }

        .chart-container {
            width: 100%;
            height: 500px;
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .text-container {
                padding: 30px 20px;
            }
            
            h1 {
                font-size: 2rem;
            }

            .simulation-form {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav>
        <a class="logo" href="../index.html">OS VISUALIZER</a>
        <ul>
            <li><button onclick="location.href = '../index.html';" class="button"><i class="fas fa-home"></i> Home</button></li>
            <li class="dropdown">
                <button class="button"><i class="fas fa-code-branch"></i> Algorithms</button>
                <div class="dropdown-content">
                    <a href="../process_scheduling/process.html"><i class="fas fa-tasks"></i> Process Scheduling</a>
                    <a href="../process_sync/home.html"><i class="fas fa-sync"></i> Process Synchronization</a>
                    <a href="../Bankers/bankers.html"><i class="fas fa-university"></i> Bankers Algorithm</a>
                    <a href="../mft_mvt/Fit.html"><i class="fas fa-puzzle-piece"></i> Fit Algorithms</a>
                    <a href="../page_replacement/page_replacement_home.html"><i class="fas fa-exchange-alt"></i> Page Replacement</a>
                    <a href="../Disk/disk.html"><i class="fas fa-hdd"></i> Disk Scheduling</a>
                    <a href="../file_allocation/file.html"><i class="fas fa-folder"></i> File Allocation</a>
                    <a href="../mft_mvt/MVFT.html"><i class="fas fa-memory"></i> MFT and MVT</a>
                </div>
            </li>
            <li><button class="button" onclick="location.href = '../about.html';"><i class="fas fa-info-circle"></i> About</button></li>
            <li><button class="button" onclick="location.href = '../references.html';"><i class="fas fa-book"></i> References</button></li>
        </ul>
    </nav>
    
    <div class="container">
        <h1>C-SCAN (Circular SCAN) Disk Scheduling</h1>

        <div class="content">
            <div class="text-container">
                <div class="info-card">
                    <p>
                        <b>C-SCAN</b> (Circular SCAN) is an enhanced version of the SCAN disk scheduling algorithm. In C-SCAN, the disk head moves from one end of the disk to the other, servicing requests along the way. However, when it reaches the end, it immediately returns to the beginning of the disk without servicing any requests on the return trip, and then starts servicing again.
                    </p>
                </div>

                <h3>How C-SCAN Works</h3>
                <p>
                    C-SCAN is designed to provide more uniform wait times compared to the original SCAN algorithm. It treats the disk as a circular list that wraps around from the highest cylinder to the lowest cylinder.
                </p>
                <p>
                    The algorithm follows these steps:
                </p>
                <ul class="bullet-points">
                    <li>The disk arm moves in a particular direction (typically towards higher cylinder numbers), servicing all requests in its path</li>
                    <li>When it reaches the end of the disk, it immediately jumps to the beginning (cylinder 0) without servicing any requests during this return journey</li>
                    <li>It then begins moving in the same direction as before, servicing requests</li>
                    <li>This creates a one-way circular scan pattern, ensuring more uniform waiting times</li>
                </ul>

                <h3>Example Calculation</h3>
                <p>
                    Let's say we have a disk with 200 cylinders (0-199), and the head is currently at position 50, moving towards higher cylinder numbers. The request queue is:
                </p>

                <table class="example-table">
                    <thead>
                        <tr>
                            <th>Request Sequence</th>
                            <th>95</th>
                            <th>180</th>
                            <th>34</th>
                            <th>119</th>
                            <th>11</th>
                            <th>123</th>
                            <th>62</th>
                        </tr>
                    </thead>
                </table>

                <p>
                    The C-SCAN algorithm will sort these requests based on the current head position and direction of movement:
                </p>

                <table class="example-table">
                    <thead>
                        <tr>
                            <th colspan="7">Requests Sorted by C-SCAN Algorithm (Initial Position: 50, Direction: Increasing)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>62</td>
                            <td>95</td>
                            <td>119</td>
                            <td>123</td>
                            <td>180</td>
                            <td>11</td>
                            <td>34</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    The head movements will be:
                </p>

                <table class="example-table">
                    <thead>
                        <tr>
                            <th>Head Movement</th>
                            <th>|50-62|</th>
                            <th>|62-95|</th>
                            <th>|95-119|</th>
                            <th>|119-123|</th>
                            <th>|123-180|</th>
                            <th>|180-199|</th>
                            <th>|199-0|</th>
                            <th>|0-11|</th>
                            <th>|11-34|</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Distance</td>
                            <td>12</td>
                            <td>33</td>
                            <td>24</td>
                            <td>4</td>
                            <td>57</td>
                            <td>19</td>
                            <td>199</td>
                            <td>11</td>
                            <td>23</td>
                        </tr>
                    </tbody>
                </table>

                <p>
                    Total head movement = 12 + 33 + 24 + 4 + 57 + 19 + 199 + 11 + 23 = 382 cylinders
                </p>
                <p>
                    Note: In C-SCAN, the head needs to move to the end of the disk (cylinder 199) and then jump back to the beginning (cylinder 0) before servicing the remaining requests.
                </p>

                <h3>Differences Between SCAN and C-SCAN</h3>
                <ul class="bullet-points">
                    <li>In SCAN, the head moves back and forth between both ends of the disk, servicing requests in both directions</li>
                    <li>In C-SCAN, the head moves in only one direction (usually increasing), and after reaching the end, it jumps back to the beginning without servicing requests during the jump</li>
                    <li>C-SCAN provides more uniform waiting times for cylinders, as every part of the disk is visited at constant intervals</li>
                    <li>C-SCAN typically has higher total seek distance but offers better fairness in terms of waiting time</li>
                </ul>

                <h3>Advantages</h3>
                <ul class="bullet-points">
                    <li>Provides more uniform wait times compared to SCAN</li>
                    <li>Reduces the variation in waiting time between requests at different locations</li>
                    <li>Avoids the favoritism that SCAN shows to middle cylinders</li>
                    <li>Better for systems where uniform response time is crucial</li>
                </ul>

                <h3>Disadvantages</h3>
                <ul class="bullet-points">
                    <li>Generally higher total seek distance compared to SCAN</li>
                    <li>The immediate return to the beginning increases total head movement</li>
                    <li>May not be as efficient as SCAN in terms of total throughput in some workloads</li>
                    <li>More complex to implement than simpler algorithms like FCFS</li>
                </ul>
            </div>
        </div>

        <div class="simulation-container">
            <h3>C-SCAN Disk Scheduling Simulator</h3>
            <p>Use this simulator to visualize how the C-SCAN disk scheduling algorithm works with your custom inputs.</p>

            <div class="simulation-form">
                <div class="form-group">
                    <label for="cylinderSequence">Cylinder Request Sequence (comma separated)</label>
                    <input type="text" class="form-control" id="cylinderSequence" placeholder="e.g., 95,180,34,119,11,123,62">
                </div>
                
                <div class="form-group">
                    <label for="initialCylinder">Initial Head Position</label>
                    <input type="number" class="form-control" id="initialCylinder" placeholder="e.g., 50" min="0">
                </div>
                
                <div class="form-group">
                    <label for="lastCylinder">Last Cylinder (Max Disk Size)</label>
                    <input type="number" class="form-control" id="lastCylinder" placeholder="e.g., 199" min="1">
                </div>

                <div class="form-group">
                    <label>Initial Direction</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="direction" value="increasing" checked> Increasing
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="direction" value="decreasing"> Decreasing
                        </label>
                    </div>
                </div>
            </div>

            <button id="simulateBtn" class="sim-button">Run C-SCAN Simulation</button>

            <div class="results-container" id="resultsContainer" style="display: none;">
                <div class="result-card">
                    <div class="result-item">
                        <div class="result-value" id="totalSeekTime">0</div>
                        <div class="result-label">Total Seek Time</div>
                    </div>
                    <div class="result-item">
                        <div class="result-value" id="averageSeekTime">0</div>
                        <div class="result-label">Average Seek Time</div>
                    </div>
                    <div class="result-item">
                        <div class="result-value" id="seekSequence">-</div>
                        <div class="result-label">Seek Sequence</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div id="seekChart"></div>
                </div>
            </div>
        </div>
    </div>

    <footer style="background: var(--color-dark); color: white; text-align: center; padding: 20px 0; margin-top: 50px;">
        <p style="margin: 0;">© 2025 OS Visualizer | Educational Tool for Operating System Concepts</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const simulateBtn = document.getElementById('simulateBtn');
            const resultsContainer = document.getElementById('resultsContainer');
            
            simulateBtn.addEventListener('click', function() {
                // Get input values
                const cylinderSequenceInput = document.getElementById('cylinderSequence').value;
                const initialCylinder = parseInt(document.getElementById('initialCylinder').value);
                const lastCylinder = parseInt(document.getElementById('lastCylinder').value);
                const direction = document.querySelector('input[name="direction"]:checked').value;
                
                // Validate inputs
                if (!cylinderSequenceInput || isNaN(initialCylinder) || isNaN(lastCylinder)) {
                    alert('Please fill in all fields with valid values');
                    return;
                }
                
                // Parse cylinder sequence
                const cylinderSequence = cylinderSequenceInput.split(',').map(num => parseInt(num.trim()));
                
                // Check if all sequence numbers are valid
                for (let cylinder of cylinderSequence) {
                    if (isNaN(cylinder) || cylinder < 0 || cylinder > lastCylinder) {
                        alert(`Invalid cylinder value: ${cylinder}. All cylinders must be between 0 and ${lastCylinder}`);
                        return;
                    }
                }
                
                // Perform C-SCAN algorithm
                let seekSequence = [];
                let currentPosition = initialCylinder;
                
                // Make a copy of the request array and add the initial position
                let requests = [...cylinderSequence];
                
                // Sort requests for processing
                if (direction === 'increasing') {
                    // Get all requests greater than current position (sorted in ascending order)
                    const greaterRequests = requests.filter(r => r >= currentPosition).sort((a, b) => a - b);
                    
                    // Get all requests less than current position (also sorted in ascending order)
                    const lessRequests = requests.filter(r => r < currentPosition).sort((a, b) => a - b);
                    
                    // Build the sequence: initial position -> greater requests -> disk end -> disk start -> lesser requests
                    seekSequence = [currentPosition, ...greaterRequests];
                    
                    // Only go to the end if there are requests greater than the current position or there are requests to be serviced after jump
                    if ((greaterRequests.length > 0 && greaterRequests[greaterRequests.length-1] < lastCylinder) || lessRequests.length > 0) {
                        seekSequence.push(lastCylinder);
                        seekSequence.push(0);  // Jump to the beginning without servicing requests
                    }
                    
                    seekSequence = [...seekSequence, ...lessRequests];
                } else { // decreasing
                    // Get all requests less than current position (sorted in descending order)
                    const lessRequests = requests.filter(r => r <= currentPosition).sort((a, b) => b - a);
                    
                    // Get all requests greater than current position (also sorted in descending order)
                    const greaterRequests = requests.filter(r => r > currentPosition).sort((a, b) => b - a);
                    
                    // Build the sequence: initial position -> lesser requests -> disk start -> disk end -> greater requests
                    seekSequence = [currentPosition, ...lessRequests];
                    
                    // Only go to the start if there are requests less than the current position or there are requests to be serviced after jump
                    if ((lessRequests.length > 0 && lessRequests[lessRequests.length-1] > 0) || greaterRequests.length > 0) {
                        seekSequence.push(0);
                        seekSequence.push(lastCylinder);  // Jump to the end without servicing requests
                    }
                    
                    seekSequence = [...seekSequence, ...greaterRequests];
                }
                
                // Calculate total seek time
                let totalSeekTime = 0;
                const movements = [];
                
                for (let i = 0; i < seekSequence.length - 1; i++) {
                    const distance = Math.abs(seekSequence[i + 1] - seekSequence[i]);
                    totalSeekTime += distance;
                    movements.push({
                        from: seekSequence[i],
                        to: seekSequence[i + 1],
                        distance: distance
                    });
                }
                
                const averageSeekTime = (totalSeekTime / cylinderSequence.length).toFixed(2);
                
                // Update results
                document.getElementById('totalSeekTime').textContent = totalSeekTime;
                document.getElementById('averageSeekTime').textContent = averageSeekTime;
                document.getElementById('seekSequence').textContent = seekSequence.join(' → ');
                
                // Show results container
                resultsContainer.style.display = 'block';
                
                // Create graph
                const xValues = Array.from({ length: seekSequence.length }, (_, i) => i);
                
                const trace = {
                    x: xValues,
                    y: seekSequence,
                    type: 'scatter',
                    mode: 'lines+markers',
                    marker: {
                        size: 10,
                        color: 'rgba(58, 175, 169, 0.8)'
                    },
                    line: {
                        color: '#3AAFA9',
                        width: 2
                    }
                };
                
                const annotations = seekSequence.map((value, index) => ({
                    x: index,
                    y: value,
                    text: value.toString(),
                    showarrow: false,
                    font: {
                        family: 'Poppins',
                        size: 12,
                        color: '#2B4141'
                    },
                    yshift: 15
                }));
                
                const layout = {
                    title: 'C-SCAN Disk Scheduling Head Movement',
                    xaxis: {
                        title: 'Request Sequence',
                        tickmode: 'array',
                        tickvals: xValues,
                        ticktext: ['Initial', ...xValues.slice(1).map(i => `Step ${i}`)]
                    },
                    yaxis: {
                        title: 'Cylinder Number',
                        range: [0, lastCylinder]
                    },
                    annotations: annotations,
                    hovermode: 'closest',
                    font: {
                        family: 'Poppins'
                    },
                    margin: {
                        l: 60,
                        r: 30,
                        t: 80,
                        b: 70
                    }
                };
                
                Plotly.newPlot('seekChart', [trace], layout);
                
                // Scroll to results
                resultsContainer.scrollIntoView({ behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>