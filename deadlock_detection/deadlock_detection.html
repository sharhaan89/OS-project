<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deadlock Detection Simulator</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="css/deadlock_detection.css">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Deadlock Detection Simulator</h1>
            <p class="subtitle">Visualize and detect deadlocks using Resource Allocation Graphs</p>
        </header>

        <div class="control-panel">
            <div class="card process-card">
                <h2><i class="fas fa-microchip"></i> Processes</h2>
                <button id="createProcess" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i> Add Process
                </button>
            </div>

            <div class="card resource-card">
                <h2><i class="fas fa-database"></i> Resources</h2>
                <div class="input-group">
                    <label for="numInstances">Instances:</label>
                    <input type="number" id="numInstances" min="1" value="1">
                </div>
                <button id="createResource" class="btn btn-primary">
                    <i class="fas fa-plus-circle"></i> Add Resource
                </button>
            </div>

            <div class="card edge-card">
                <h2><i class="fas fa-project-diagram"></i> Edges</h2>
                
                <div class="edge-controls">
                    <div class="edge-section">
                        <h3>Request Edge</h3>
                        <div class="input-group">
                            <label for="requestProcess">Process:</label>
                            <input type="number" id="requestProcess" min="1" value="1">
                        </div>
                        <div class="input-group">
                            <label for="requestResource">Resource:</label>
                            <input type="number" id="requestResource" min="1" value="1">
                        </div>
                        <button id="createRequestEdge" class="btn btn-secondary">
                            <i class="fas fa-arrow-right"></i> Add Request
                        </button>
                    </div>

                    <div class="edge-section">
                        <h3>Allocation Edge</h3>
                        <div class="input-group">
                            <label for="allocResource">Resource:</label>
                            <input type="number" id="allocResource" min="1" value="1">
                        </div>
                        <div class="input-group">
                            <label for="allocProcess">Process:</label>
                            <input type="number" id="allocProcess" min="1" value="1">
                        </div>
                        <button id="createAllocationEdge" class="btn btn-secondary">
                            <i class="fas fa-arrow-left"></i> Add Allocation
                        </button>
                    </div>
                </div>
            </div>

            <div class="card action-card">
                <button id="detectDeadlock" class="btn btn-success">
                    <i class="fas fa-search"></i> Detect Deadlock
                </button>
                <div id="result" class="result-display">
                    System status will appear here
                </div>
            </div>
        </div>

        <div class="visualization-area">
            <div class="processes-container">
                <!-- Processes will be added here dynamically -->
            </div>
            <div class="resources-container">
                <!-- Resources will be added here dynamically -->
            </div>
        </div>

        <div class="info-panel">
            <h2><i class="fas fa-info-circle"></i> About Deadlocks</h2>
            <p>A deadlock occurs when two or more processes are blocked forever, waiting for each other to release resources. The Resource Allocation Graph (RAG) helps visualize resource requests and allocations to detect potential deadlocks.</p>
            <div class="legend">
                <div class="legend-item">
                    <div class="circle-demo"></div>
                    <span>Process</span>
                </div>
                <div class="legend-item">
                    <div class="rect-demo"></div>
                    <span>Resource</span>
                </div>
                <div class="legend-item">
                    <div class="arrow-demo request-demo"></div>
                    <span>Request</span>
                </div>
                <div class="legend-item">
                    <div class="arrow-demo alloc-demo"></div>
                    <span>Allocation</span>
                </div>
            </div>
        </div>
    </div>

    <script src="js/deadlock_detection.js"></script>
</body>
</html>